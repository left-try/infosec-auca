server {
    listen 8000;
    server_name localhost;

    # Optional: serve a basic home page at /
    root /var/www/html;
    index index.html;

    # ---------- Reverse proxy for your API ----------
    # TRAILING SLASH BEHAVIOR (explained below!)
    location /api/ {
        proxy_pass http://127.0.0.1:5000/;

        # Pass client/proxy info to backend
        proxy_set_header Host              $host;
        proxy_set_header X-Real-IP         $remote_addr;
        proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        # Timeouts (tweak for long requests/streaming)
        proxy_read_timeout  60s;
        proxy_connect_timeout 5s;
        proxy_send_timeout  60s;

        # If your API sets absolute Location headers, donâ€™t rewrite them
        proxy_redirect off;

        # If responses are large OR you upload files:
        client_max_body_size 50m;
    }

    # Optional: deny everything else under /api without trailing slash
    # (helps normalize paths)
    location = /api { return 301 /api/; }
}
